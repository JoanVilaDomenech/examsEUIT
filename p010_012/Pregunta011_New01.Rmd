Question
========
```{r data generation, echo = FALSE, results = "hide", comment=FALSE}
options(OutDec=",")
source("/Users/jvila/Dropbox/euit/common/exerc/examsEUIT/simulV02.r")
xn <- sample(seq(18,24), 1)
dat <- data.frame(id=seq(1, xn))
dat$fim<- SimCon(xn,100,12,80,120,0)
``` 
Se ha medido los valores de FIM (una escala que mide dependencia) a `r xn` participantes. Los valores obtenidos son los siguientes:

<p style="text-align: center;">Tabla 1: Valores de FIM medidos en `r nrow(dat)` participantes</p>
```{r echo = FALSE, results = 'asis', comment=FALSE}
library(kableExtra)
dat %>%
  kbl(caption = "", , align = "c") %>%
  kable_classic(full_width = F, html_font = "Cambria")
```

<br>

Calcule la **amplitud intercuartil** (AIQ)  y la **Amplitud** de estos valores y diga ¿Cuál de las siguientes respuestas es <font size="5"> **CORRECTA** </font>?
```{r echo = FALSE, results = 'hide', comment=FALSE}
xtiles <- quantile(dat$fim, probs = c(0.25, 0.75), type=6)
p25 <- xtiles[1]
p75 <- xtiles[2]
aiq <- xtiles[2]- xtiles[1]
ampli <- max(dat$fim) - min(dat$fim)
xaiq <- aiq*1.2
xampli <- ampli*0.8
yaiq <-  aiq*1.2
yampli <- ampli
zaiq <- aiq*0.8
zampli <- ampli*1.2
waiq <- aiq
wampli <- ampli*1.2
```

Answerlist
----------
* AIQ = `r aiq`,  &emsp; Amplitud = `r ampli`
* AIQ = `r xaiq`,  &emsp; Amplitud = `r xampli`
* AIQ = `r yaiq`,  &emsp; Amplitud = `r yampli`
* AIQ = `r zaiq`,  &emsp; Amplitud = `r zampli`
* AIQ = `r waiq`,  &emsp; Amplitud = `r wampli`


Solution
========
Para calcular los percentiles primero se tienen que ordenar los valores. A continuación se muestran los valores ordenados:

<p style="text-align: center;">Valores de FIM medidos en `r nrow(dat)` participantes. Valores ordenados</p>
```{r echo = FALSE, results = 'asis', comment=FALSE}
dat <- dat[order(dat$fim), ]
dat$orden <- seq(1, nrow(dat))
dat <- dat[, c("id", "orden", "fim")]
dat %>%
  kbl(caption = "", , align = "c", row.names = F) %>%
  kable_classic(full_width = F, html_font = "Cambria")
```



Para obtener el percentil 25 (Cuartil 1) primero se debe calcular el valor 'c':
```{r echo = FALSE, results = 'asis', comment=FALSE}
c1 <- round(25 * (nrow(dat)+1) / 100, 2)
```

**c** = $\dfrac{25 * (`r nrow(dat)`+1)}{100} = `r format(c1, digits=4)`$

La parte entera de esta cifra (`r floor(c1)`) indica que el valor del percentil 25 estará entre la fila `r floor(c1)` y la `r floor(c1)+1`. 

* En la fila `r floor(c1)` hay el valor <span style="color: red;"> `r dat$fim[floor(c1)]`</span>    
* En la fila `r floor(c1)+1` hay el valor <span style="color: blue;"> `r dat$fim[floor(c1)+1]`</span> 

Para saber en que punto está entre <span style="color: red;"> `r dat$fim[floor(c1)]`</span> (valor de fim en la fila `r floor(c1)`) y  <span style="color: blue;"> `r dat$fim[floor(c1)+1]`</span> (valor de fim en la fila `r floor(c1)+1`) , se ha de añadir a <span style="color: red;"> `r dat$fim[floor(c1)]`</span> la proporción que nos indica la parte decimal de 'c' (`r c1-floor(c1)`). Concretamente:


$P25=$<span style="color: red;"> $`r dat[floor(c1), "fim"]`$</span> $+$<span style="color: blue;">$(`r dat[floor(c1)+1, "fim"]`$</span> $-$<span style="color: red;">$`r dat[floor(c1), "fim"]`$</span>$) * `r c1- floor(c1)`= `r p25`$


El percentil 25 de la variable **fim**  =  `r p25`.

<br>
<br>

De forma similar, para obtener el percentil 75 (Cuartil 3) se calcula el valor 'c':
```{r echo = FALSE, results = 'asis', comment=FALSE}
c3 <- round(75 * (nrow(dat)+1) / 100, 3)
```

**c** = $\dfrac{75 * (`r nrow(dat)`+1)}{100} = `r format(c3, digits=4)`$

La parte entera de esta cifra (`r floor(c3)`) indica que el valor del percentil 25 estará entre la fila `r floor(c3)` y la `r floor(c3)+1`. 

* En la fila `r floor(c3)` hay el valor <span style="color: red;"> `r dat$fim[floor(c3)]`</span>    
* En la fila `r floor(c3)+1` hay el valor <span style="color: blue;"> `r dat$fim[floor(c3)+1]`</span> 

Para saber en que punto está entre <span style="color: red;"> `r dat$fim[floor(c3)]`</span> (valor de fim en la fila `r floor(c3)`) y  <span style="color: blue;"> `r dat$fim[floor(c3)+1]`</span> (valor de fim en la fila `r floor(c3)+1`) , se ha de añadir a <span style="color: red;"> `r dat$fim[floor(c3)]`</span> la proporción que nos indica la parte decimal de 'c' (`r c3-floor(c3)`). Concretamente:


$P75=$<span style="color: red;"> $`r dat[floor(c3), "fim"]`$</span> $+$<span style="color: blue;">$(`r dat[floor(c3)+1, "fim"]`$</span> $-$<span style="color: red;">$`r dat[floor(c3), "fim"]`$</span>$) * `r c3- floor(c3)`= `r p75`$


El percentil 75 de la variable **fim** =  `r p75`.

<br>

La amplitud intercuatil (AIQ):

AIQ = $Q_3-Q_1=`r xtiles[2]`-`r xtiles[1]` = `r xtiles[2]- xtiles[1]`$

<br>

La Amplitud (Amp) es la diferencia entre el valor máximo y mínimo.

Amp= $`r max(dat[, "fim"])` - `r min(dat[, "fim"])` = `r max(dat[, "fim"])-min(dat[, "fim"])`$

 
Answerlist
----------
* Respuesta Correcta
* Respuesta FALSA
* Respuesta FALSA
* Respuesta FALSA
* Respuesta FALSA



Meta-information
================
exname: Percentiles
extype: schoice
exsolution: 10000
exshuffle: 5
